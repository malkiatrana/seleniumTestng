package APITesting;

import static io.restassured.RestAssured.given;

import org.hamcrest.Matchers;

import org.testng.annotations.Test;
import io.restassured.RestAssured;
import io.restassured.http.ContentType;
import io.restassured.response.ResponseBody;
import utility.ConfigReader;

public class APITesting{
	ConfigReader config;
	
	@Test()
	public void Test_01_Amount_Transfer() {
		config = new ConfigReader();
		RestAssured.given().queryParam("fromAccountId", config.getSavingsAccountNumber()).queryParam("toAccountId", config.getCheckingAccountNumber())).queryParam("amount", "1")
	.accept(ContentType.JSON).
	post("https://parabank.parasoft.com/parabank/services/bank/transfer").
	then().
	statusCode(200).
	log().all().assertThat().body(Matchers.equalTo("Successfully transferred $1 from account #13122 to account #13344"));
	}

	@Test
	public void Get_Account() {
		
	ResponseBody resp = given().
            when().get("https://parabank.parasoft.com/parabank/services/bank/accounts/13344");
         
System.out.println("Get Response is: " + resp.asString());
	}
	/* Account creation is not working With API itself
	@Test()
	public void Test_02() {
		RestAssured.given().queryParam("customerId", 12212).queryParam("newAccountType", "CHECKING").queryParam("fromAccountId", "13677")
		.accept(ContentType.JSON).
		post("https://parabank.parasoft.com/parabank/services/bank/createAccount").
		then().
		statusCode(200).
		log().all();//.assertThat().body(Matchers.equalTo("Successfully transferred $1 from account #13122 to account #13344"));
		}
	*/
		}
	
